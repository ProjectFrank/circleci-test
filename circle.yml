general:
  build_dir: ../$THING
machine:
  pre:
    - echo nothing
  environment:
    PATH: ~/.m2/apache-maven-3.3.3/bin:$PATH
    XCODE_WORKSPACE: dummy
    XCODE_SCHEME: dummy
    CIRCLE_TAG: $(cd $CIRCLE_PROJECT_REPONAME && git describe --abbrev=0 --tags)
    THING: nodirexists
  post:
    - echo $log
    - cd $CIRCLE_PROJECT_REPONAME && git describe --abbrev=0 --tags
    - mvn -v
    - sudo rm -rf /usr/local/go
    - if [ ! -e go1.5.linux-amd64.tar.gz ]; then curl -o go1.5.linux-amd64.tar.gz https://storage.googleapis.com/golang/go1.5.linux-amd64.tar.gz; fi
    - sudo tar -C /usr/local -xzf go1.5.linux-amd64.tar.gz
  services:
    - docker
  post:
    - rvm list
    - rvm use 2.2.3
    - rvm list
    - which ruby

notify:
  webhooks:
    - url: https://hooks.slack.com/services/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

deployment:
  allthethings:
    branch: /.*/
    commands:
      - echo "all the things":
          parallel: true

dependencies:
  override:
    - echo "NO DEPS"
  cache_directories:
    - ~/go1.5.linux-amd64.tar.gz
    - ~/.rvm/rubies/ruby-2.2.3
  
test:
  override:
    - go version
    - echo "NO TESTSS"
    - pwd