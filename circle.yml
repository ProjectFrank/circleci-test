general:
  build_dir: ../$THING

machine:
  pre:
    - sudo apt-get update
    - mkdir -p ~/nodirexists
    - echo nothing
    - sudo rm -rf /usr/local/go
    - curl -o go1.5.linux-amd64.tar.gz https://storage.googleapis.com/golang/go1.5.linux-amd64.tar.gz
    - sudo tar -C /usr/local -xzf go1.5.linux-amd64.tar.gz
  environment:
    PATH: ~/.m2/apache-maven-3.3.3/bin:$PATH
    XCODE_WORKSPACE: dummy
    XCODE_SCHEME: dummy
    CIRCLE_TAG: $(cd $CIRCLE_PROJECT_REPONAME && git describe --abbrev=0 --tags)
    THING: nodirexists
  post:
    - echo $log
    - cd $CIRCLE_PROJECT_REPONAME && git describe --abbrev=0 --tags
    - mvn -v
  services:
    - docker
  ruby:
    version: 2.1.6

notify:
  webhooks:
    - url: https://hooks.slack.com/services/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

deployment:
  allthethings:
    branch: /.*/
    commands:
      - echo "all the things":
          parallel: true

dependencies:
  pre:
    - sudo cp /nonexistent .
  override:
    - pwd
  
test:
  override:
    - echo "NO TESTSS"
    - pwd