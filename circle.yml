machine:
  node:
    version: stable
  environment:
    XCODE_WORKSPACE: dummy
    XCODE_SCHEME: dummy
  post:
    - rvm use 2.2.1
    - rvm info 2.2.1
    - which ruby
    - ls -la $(which ruby)
    - rvm version
    - pyenv
    - '[[ ! -s "$(git rev-parse --git-dir)/shallow" ]] || git fetch --unshallow'
    - echo $CIO_BUILD_HASH
  services:
    - docker
  python:
    version: 2.7

dependencies:
  cache_directories:
    - ~/.rvm/gems/ruby-2.2.1
    - ~/.rvm/rubies/ruby-2.2.1
    - mongodb-linux-x86_64-3.0.5
  override:
    - curl -L -o https://github.com/tesseract-ocr/tesseract/archive/xxx.tar.gz
    - tar zxvf xxx.tar.gz
    - echo "stuff"
  pre:
    - if [[ ! -d mongodb-linux-x86_64-3.0.5 ]]; then wget http://downloads.mongodb.org/linux/mongodb-linux-x86_64-3.0.4.tgz && tar xvzf mongodb-linux-x86_64-3.0.5.tgz; fi
    - sudo service mongodb stop
    - sudo cp mongodb-linux-x86_64-3.0.4/bin/* /usr/bin
    - sudo sudo service mongodb start

test:
  override:
    - echo "NO TEST"

notify:
  webhooks:
    - url: https://hooks.slack.com/services/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