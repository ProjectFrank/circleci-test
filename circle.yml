machine:
  pre:
    - echo nothing
  environment:
    PATH: ~/.m2/apache-maven-3.3.3/bin:$PATH
    CIRCLE_TAG: $(cd $CIRCLE_PROJECT_REPONAME && git describe --abbrev=0 --tags)
    THING: nodirexists
  post:
    - echo $log
    - cd $CIRCLE_PROJECT_REPONAME && git describe --abbrev=0 --tags
  pre:
#    - sudo sed -i '/ulimit -l unlimited/d' /etc/init.d/cassandra
#    - sudo sed -i '/ulimit -n "$FD_LIMIT"/d' /etc/init.d/cassandra
checkout:
  post:
    - pwd

notify:
  webhooks:
    - url: https://hooks.slack.com/services/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

deployment:
  allthethings:
    branch: /.*/
    commands:
      - echo "all the things":
          parallel: true

dependencies:
  cache_directories:
    - ~/go1.5.linux-amd64.tar.gz
    - ~/.rvm/rubies/ruby-2.2.3
  pre:
    - sudo apt-get update; sudo apt-get install libicu52
    - curl --output /home/ubuntu/bin/phantomjs-2.0.1-linux-x86_64-dynamic https://s3.amazonaws.com/circle-support-bucket/phantomjs/phantomjs-2.0.1-linux-x86_64-dynamic
    - chmod a+x /home/ubuntu/bin/phantomjs-2.0.1-linux-x86_64-dynamic
    - sudo ln -s --force /home/ubuntu/bin/phantomjs-2.0.1-linux-x86_64-dynamic /usr/local/bin/phantomjs
    
test:
  override:
    - go version
    - echo "NO TESTS"
    - pwd