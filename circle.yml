machine:
  pre:
    - echo nothing
  environment:
    PATH: ~/.m2/apache-maven-3.3.3/bin:$PATH
    CIRCLE_TAG: $(cd $CIRCLE_PROJECT_REPONAME && git describe --abbrev=0 --tags)
    THING: nodirexists
  post:
    - echo $log
    - cd $CIRCLE_PROJECT_REPONAME && git describe --abbrev=0 --tags
    - sudo bash ./$CIRCLE_PROJECT_REPONAME/cassandra.sh
  services:
    - cassandra
  pre:
#    - sudo sed -i '/ulimit -l unlimited/d' /etc/init.d/cassandra
#    - sudo sed -i '/ulimit -n "$FD_LIMIT"/d' /etc/init.d/cassandra

notify:
  webhooks:
    - url: https://hooks.slack.com/services/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

deployment:
  allthethings:
    branch: /.*/
    commands:
      - echo "all the things":
          parallel: true

dependencies:
  cache_directories:
    - ~/go1.5.linux-amd64.tar.gz
    - ~/.rvm/rubies/ruby-2.2.3
  
test:
  override:
    - go version
    - echo "NO TESTS"
    - pwd