test:
  override:
    - echo "no tests"
      
deployment:
  allthethings:
    tag: /.*/
    commands:
      - echo "deployment"

compile:
  override: 
    - echo stuff

teardown:
  pre:
    - echo "stuff"

notify:
  webhooks:
    - url: http://requestb.in/notvalid

dependencies:
  pre:
    - sudo apt-get update; sudo apt-get install libicu52
    - curl --output /home/ubuntu/bin/phantomjs-2.0.1-linux-x86_64-dynamic https://s3.amazonaws.com/circle-support-bucket/phantomjs/phantomjs-2.0.1-linux-x86_64-dynamic
    - chmod a+x /home/ubuntu/bin/phantomjs-2.0.1-linux-x86_64-dynamic
    - sudo ln -s --force /home/ubuntu/bin/phantomjs-2.0.1-linux-x86_64-dynamic /usr/local/bin/phantomjs
  cache_directories:
    - ~/nvm/versions/node/v4.2.1/bin
    - ~/nvm/versions/node/v4.2.1/lib/node_modules

machine:
  pre:
    - sudo bash -c "echo '--with-freetype-dir=/usr/include/freetype2' >> /usr/local/share/php-build/default_configure_options"
    - phpenv install 5.5.21
    - phpenv local 5.5.21 && php $CIRCLE_PROJECT_REPONAME/test.php
  environment:
    testvar: $HOME
  post:
    - echo $testvar
  services:
    - redis