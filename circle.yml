general:
  build_dir: ../$THING

machine:
  pre:
    - mkdir -p ~/nodirexists
    - echo nothing
    - wget http://apache.mirror.iweb.ca/maven/maven-3/3.3.3/binaries/apache-maven-3.3.3-bin.tar.gz
    - tar xzvf apache-maven-3.3.3-bin.tar.gz
    - mv apache-maven-3.3.3 .m2/
  environment:
    PATH: ~/.m2/apache-maven-3.3.3/bin:$PATH
    XCODE_WORKSPACE: dummy
    XCODE_SCHEME: dummy
    CIRCLE_TAG: $(cd $CIRCLE_PROJECT_REPONAME && git describe --abbrev=0 --tags)
    THING: nodirexists
  post:
    - echo $log
    - cd $CIRCLE_PROJECT_REPONAME && git describe --abbrev=0 --tags
    - mvn -v
  services:
    - docker
  ruby:
    version: 2.1.6

notify:
  webhooks:
    - url: https://hooks.slack.com/services/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

deployment:
  allthethings:
    branch: /.*/
    commands:
      - echo "all the things":
          parallel: true

dependencies:
  pre:
    - sudo cp /nonexistent .
  override:
    - pwd
  
test:
  override:
    - echo "NO TESTSS"
    - pwd